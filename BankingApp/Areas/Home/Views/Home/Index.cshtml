@model List<BankingApp.Areas.Home.Models.BankAccountViewModel>

@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="~/css/home.css" />
}

<div class="justify-content-center">
    <form id="transfer-form" action="@Url.Action("Transfer", "Home" )" method="post">
        @Html.AntiForgeryToken()
        <div class="transfer-container">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fa fa-fw fa-gbp"></i></span>
                    </div>
                    <input class="form-control" placeholder="Amount to transfer" type="number" step="0.01" min="1" max="10000" id="AmountToTransfer" name="AmountToTransfer" />
                </div>
            </div>

            <div class="form-group">
                <select disabled class="form-control select-required" id="SenderID" name="SenderID">
                    <option value="" selected>Transfer from</option>
                    @foreach (var bankAccount in Model)
                    {
                        <option value="@bankAccount.BankAccountID">@bankAccount.AccountName</option>
                    }
                </select>
            </div>

            <div class="form-group">
                <select disabled class="form-control select-required" id="RecipientID" name="RecipientID">
                    <option value="" selected>Transfer to</option>
                    @foreach (var bankAccount in Model)
                    {
                        <option value="@bankAccount.BankAccountID">@bankAccount.AccountName</option>
                    }
                </select>
            </div>

            <input class="btn btn-primary btn-block" type="submit" value="Transfer" />
        </div>
    </form>

    <hr />

    @foreach (var bankAccount in Model)
    {
        <div class="bank-account-container text-center">
            <table class="table table-bordered">
                <thead class="thead-light">
                    <tr>
                        <th>Account ID</th>
                        <th>Account Name</th>
                        <th>Account Type</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody class="bg-white">
                    <tr>
                        <td>@bankAccount.BankAccountID</td>
                        <td>@bankAccount.AccountName</td>
                        <td>@bankAccount.AccountType</td>

                        @if (bankAccount.Balance > 0)
                        {
                            <td class="text-success">@bankAccount.Balance</td>
                        }
                        else if (bankAccount.Balance < 0)
                        {
                            <td class="text-danger">@bankAccount.Balance</td>
                        }
                        else if (bankAccount.Balance == 0)
                        {
                            <td>@bankAccount.Balance</td>
                        }
                    </tr>
                </tbody>
            </table>
        </div>
    }
</div>

@section Scripts {
    <script src="~/js/home.js" asp-append-version="true"></script>
}
